# 题目

一个二维数组 `classes` ，其中 `classes[i] = [pass_i, total_i]` ，第 `i` 个班级有 `total_i` 个学生，其中只有 `pass_i` 个学生可以通过考试。  

给一个整数 `extraStudents` ，表示额外有 `extraStudents` 个聪明的学生，他们 __一定__ 能通过任何班级的期末考。你需要给这 `extraStudents` 个学生每人都安排一个班级，使得 __所有__ 班级的 __平均通过率__ 最大。  

# 堆

适用于对同一个序列反复排序的情况  

```python
class Solution:
    def maxAverageRatio(self, classes: List[List[int]], extraStudents: int) -> float:
        '''
        (a+1) / (b+1) - a / b

          b-a
       = -----
         b(b+1)

        '''
        l = len(classes)
        pas = [(-(b-a)/(b*(b+1)), a, b) for a, b in classes]
        heapq.heapify(pas)
        for ex in range(extraStudents):
            _, a, b = heapq.heappop(pas)
            heapq.heappush(pas, (-(b-a)/((b+1)*(b+2)), a+1, b+1))
        return sum([a/b for _, a, b in pas])/l
```
